{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/miyaeng/Documents/Apprentice/RealWorld/hello-world-app-front/src/lib/axios.ts"],"sourcesContent":["import axios from 'axios'\n\nconst api = axios.create({\n  baseURL: 'http://localhost:8000',\n  withCredentials: true, // ← Cookieを送信するために必須\n})\n\n// ✅ 追加！CSRFトークンを自動的にリクエストヘッダーにセット\napi.interceptors.request.use((config) => {\n  const token = getCookieValue('XSRF-TOKEN');\n  if (token && config.headers) {\n    config.headers['X-XSRF-TOKEN'] = decodeURIComponent(token);\n  }\n  return config;\n});\n\nfunction getCookieValue(name: string): string | null {\n  const value = document.cookie\n    .split('; ')\n    .find((row) => row.startsWith(name + '='));\n  return value ? value.split('=')[1] : null;\n}\n\n\nexport default api"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,iBAAiB;AACnB;AAEA,kCAAkC;AAClC,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,eAAe;IAC7B,IAAI,SAAS,OAAO,OAAO,EAAE;QAC3B,OAAO,OAAO,CAAC,eAAe,GAAG,mBAAmB;IACtD;IACA,OAAO;AACT;AAEA,SAAS,eAAe,IAAY;IAClC,MAAM,QAAQ,SAAS,MAAM,CAC1B,KAAK,CAAC,MACN,IAAI,CAAC,CAAC,MAAQ,IAAI,UAAU,CAAC,OAAO;IACvC,OAAO,QAAQ,MAAM,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG;AACvC;uCAGe","debugId":null}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///Users/miyaeng/Documents/Apprentice/RealWorld/hello-world-app-front/src/contexts/AuthContext.tsx"],"sourcesContent":["\n// 復習\n\n'use client';\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport api from '@/lib/axios';\nimport { ParamValue } from 'next/dist/server/request/params';\n\ntype Article = {\n    id: number;\n    slug: string;\n    title: string;\n    description: string;\n    body: string;\n    tagList: string[] | null;\n    createdAt: string;\n    updatedAt: string;\n    favorited: boolean | null;\n    favoritesCount: number | null;\n    author_id: number;\n    author: {\n        name: string;\n        img?: string;\n      };\n}\n\ntype AuthContextType = {\n    isAuthenticated: boolean;\n    userId: number | null;\n    username: string | null;\n    userImage: string | null;\n    articles: Article[];\n    setArticles: (articles: Article[]) => void;\n    login: (user: { id: number; username: string; userImage?: string }) => void;\n    logout: () => void;\n    deleteArticle: (slug: string) => void;\n};\n\nconst AuthContext = createContext<AuthContextType>({\n    isAuthenticated: false,\n    userId: null,\n    username: null,\n    userImage: null,\n    articles: [],\n    setArticles: () => { },\n    login: () => { },\n    logout: () => { },\n    deleteArticle: () => { },\n});\n\nexport const AuthProvider = ({ children }: { children: React.ReactNode }) => {\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\n    const [userId, setUserId] = useState<number | null>(null);\n    const [username, setUsername] = useState<string | null>(null);\n    const [userImage, setUserImage] = useState<string | null>(null);\n    const [articles, setArticles] = useState<Article[]>([]);\n\n    const login = ({ id, username, userImage }: { id: number; username: string; userImage?: string }) => {\n        setIsAuthenticated(true);\n        setUserId(id);\n        setUsername(username);\n        setUserImage(userImage || null);\n    };\n\n    const logout = async () => {\n        await api.post('/api/users/logout');\n        setIsAuthenticated(false);\n        setUsername(null);\n        setUserImage(null);\n        setArticles([]);\n    };\n\n    const deleteArticle = async (slug: string) => {\n        try {\n            await api.delete(`/api/articles/${slug}`);\n            alert('記事を削除しました');\n            setArticles(articles.filter((article) => article.slug !== slug));\n        } catch (err) {\n            console.error('記事削除エラー:', err);\n        }\n    };\n\n    useEffect(() => {\n        const fetchUser = async () => {\n            try {\n                const res = await api.get('/api/user');\n                login({\n                    id: res.data.id,\n                    username: res.data.name,\n                    userImage: res.data.img,\n                });\n            } catch (err) {\n                setIsAuthenticated(false);\n            }\n        };\n\n        const fetchArticles = async () => {\n            try {\n                const res = await api.get('/api/articles');\n                setArticles(res.data.data.article);\n            } catch (err) {\n                console.error('記事取得エラー:', err);\n            }\n        };\n\n        fetchUser();\n        fetchArticles();\n    }, []);\n\n    return (\n        <AuthContext.Provider\n            value={{\n                isAuthenticated,\n                userId,\n                username,\n                userImage,\n                login,\n                logout,\n                articles,\n                setArticles,\n                deleteArticle\n            }}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n\nexport const useAuth = () => useContext(AuthContext);\n"],"names":[],"mappings":"AACA,KAAK;;;;;;AAGL;AACA;;;AAFA;;;AAmCA,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAAmB;IAC/C,iBAAiB;IACjB,QAAQ;IACR,UAAU;IACV,WAAW;IACX,UAAU,EAAE;IACZ,aAAa,KAAQ;IACrB,OAAO,KAAQ;IACf,QAAQ,KAAQ;IAChB,eAAe,KAAQ;AAC3B;AAEO,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAiC;;IACpE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IACpD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IACxD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAC1D,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IAEtD,MAAM,QAAQ,CAAC,EAAE,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAwD;QAC5F,mBAAmB;QACnB,UAAU;QACV,YAAY;QACZ,aAAa,aAAa;IAC9B;IAEA,MAAM,SAAS;QACX,MAAM,sHAAA,CAAA,UAAG,CAAC,IAAI,CAAC;QACf,mBAAmB;QACnB,YAAY;QACZ,aAAa;QACb,YAAY,EAAE;IAClB;IAEA,MAAM,gBAAgB,OAAO;QACzB,IAAI;YACA,MAAM,sHAAA,CAAA,UAAG,CAAC,MAAM,CAAC,CAAC,cAAc,EAAE,MAAM;YACxC,MAAM;YACN,YAAY,SAAS,MAAM,CAAC,CAAC,UAAY,QAAQ,IAAI,KAAK;QAC9D,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,YAAY;QAC9B;IACJ;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACN,MAAM;oDAAY;oBACd,IAAI;wBACA,MAAM,MAAM,MAAM,sHAAA,CAAA,UAAG,CAAC,GAAG,CAAC;wBAC1B,MAAM;4BACF,IAAI,IAAI,IAAI,CAAC,EAAE;4BACf,UAAU,IAAI,IAAI,CAAC,IAAI;4BACvB,WAAW,IAAI,IAAI,CAAC,GAAG;wBAC3B;oBACJ,EAAE,OAAO,KAAK;wBACV,mBAAmB;oBACvB;gBACJ;;YAEA,MAAM;wDAAgB;oBAClB,IAAI;wBACA,MAAM,MAAM,MAAM,sHAAA,CAAA,UAAG,CAAC,GAAG,CAAC;wBAC1B,YAAY,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO;oBACrC,EAAE,OAAO,KAAK;wBACV,QAAQ,KAAK,CAAC,YAAY;oBAC9B;gBACJ;;YAEA;YACA;QACJ;iCAAG,EAAE;IAEL,qBACI,6LAAC,YAAY,QAAQ;QACjB,OAAO;YACH;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;QACJ;kBACC;;;;;;AAGb;GA3Ea;KAAA;AA6EN,MAAM,UAAU;;IAAM,OAAA,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;AAAW;IAAtC","debugId":null}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///Users/miyaeng/Documents/Apprentice/RealWorld/hello-world-app-front/src/components/header.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { usePathname, useRouter } from 'next/navigation';\n\nexport default function Header() {\n    const { isAuthenticated, username, userImage, logout } = useAuth();\n    const router = useRouter();\n    const currentPath = usePathname();\n\n    const isActive = (path: string) => currentPath === path;\n\n    return (\n        <nav className=\"navbar navbar-light\">\n            <div className=\"container\">\n                <a className=\"navbar-brand\" href=\"/\">conduit</a>\n                <ul className=\"nav navbar-nav pull-xs-right\">\n                    <li className=\"nav-item\">\n                        {/* <!-- Add \"active\" className when you're on that page\" --> */}\n                        <a className={`nav-link ${isActive('/') ? 'active' : ''}`} href=\"/\">Home</a>\n                    </li>\n                    {isAuthenticated ? (\n                        <>\n                            <li className=\"nav-item\">\n                                <a className={`nav-link ${isActive('/editor') ? 'active' : ''}`} href=\"/editor\"> <i className=\"ion-compose\"></i>&nbsp;New Article </a>\n                            </li>\n                            <li className=\"nav-item\">\n                                <a className={`nav-link ${isActive('/settings') ? 'active' : ''}`} href=\"/settings\"> <i className=\"ion-gear-a\"></i>&nbsp;Settings </a>\n                            </li>\n                            <li className=\"nav-item\">\n                                <a className={`nav-link ${isActive('/profile/eric-simons') ? 'active' : ''}`} href=\"/profile/eric-simons\">\n                                    &nbsp;\n                                    {userImage && <img src={userImage} className=\"user-pic\" />}\n                                    {username}\n                                </a>\n                            </li>\n                            <li className=\"nav-item\">\n                                <button\n                                    className=\"nav-link btn btn-link\"\n                                    onClick={() => {\n                                        logout();\n                                        router.push('/login');\n                                    }}\n                                >\n                                    Log out\n                                </button>\n                            </li>\n                        </>\n                    ) : (\n                        <>\n                            <li className=\"nav-item\">\n                                <a className={`nav-link ${isActive('/login') ? 'active' : ''}`} href=\"/login\">&nbsp;Sign in</a>\n                            </li>\n                            <li className=\"nav-item\">\n                                <a className={`nav-link ${isActive('/register') ? 'active' : ''}`} href=\"/register\">&nbsp;Sign up</a>\n                            </li>\n                        </>\n                    )}\n                </ul>\n            </div>\n        </nav>\n    )\n}"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACpB,MAAM,EAAE,eAAe,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,kIAAA,CAAA,UAAO,AAAD;IAC/D,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,cAAc,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAE9B,MAAM,WAAW,CAAC,OAAiB,gBAAgB;IAEnD,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BACX,6LAAC;oBAAE,WAAU;oBAAe,MAAK;8BAAI;;;;;;8BACrC,6LAAC;oBAAG,WAAU;;sCACV,6LAAC;4BAAG,WAAU;sCAEV,cAAA,6LAAC;gCAAE,WAAW,CAAC,SAAS,EAAE,SAAS,OAAO,WAAW,IAAI;gCAAE,MAAK;0CAAI;;;;;;;;;;;wBAEvE,gCACG;;8CACI,6LAAC;oCAAG,WAAU;8CACV,cAAA,6LAAC;wCAAE,WAAW,CAAC,SAAS,EAAE,SAAS,aAAa,WAAW,IAAI;wCAAE,MAAK;;4CAAU;0DAAC,6LAAC;gDAAE,WAAU;;;;;;4CAAkB;;;;;;;;;;;;8CAEpH,6LAAC;oCAAG,WAAU;8CACV,cAAA,6LAAC;wCAAE,WAAW,CAAC,SAAS,EAAE,SAAS,eAAe,WAAW,IAAI;wCAAE,MAAK;;4CAAY;0DAAC,6LAAC;gDAAE,WAAU;;;;;;4CAAiB;;;;;;;;;;;;8CAEvH,6LAAC;oCAAG,WAAU;8CACV,cAAA,6LAAC;wCAAE,WAAW,CAAC,SAAS,EAAE,SAAS,0BAA0B,WAAW,IAAI;wCAAE,MAAK;;4CAAuB;4CAErG,2BAAa,6LAAC;gDAAI,KAAK;gDAAW,WAAU;;;;;;4CAC5C;;;;;;;;;;;;8CAGT,6LAAC;oCAAG,WAAU;8CACV,cAAA,6LAAC;wCACG,WAAU;wCACV,SAAS;4CACL;4CACA,OAAO,IAAI,CAAC;wCAChB;kDACH;;;;;;;;;;;;yDAMT;;8CACI,6LAAC;oCAAG,WAAU;8CACV,cAAA,6LAAC;wCAAE,WAAW,CAAC,SAAS,EAAE,SAAS,YAAY,WAAW,IAAI;wCAAE,MAAK;kDAAS;;;;;;;;;;;8CAElF,6LAAC;oCAAG,WAAU;8CACV,cAAA,6LAAC;wCAAE,WAAW,CAAC,SAAS,EAAE,SAAS,eAAe,WAAW,IAAI;wCAAE,MAAK;kDAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQpH;GAzDwB;;QACqC,kIAAA,CAAA,UAAO;QACjD,qIAAA,CAAA,YAAS;QACJ,qIAAA,CAAA,cAAW;;;KAHX","debugId":null}}]
}