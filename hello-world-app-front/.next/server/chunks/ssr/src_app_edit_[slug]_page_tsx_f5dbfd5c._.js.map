{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/miyaeng/Documents/Apprentice/React_Next/hello-world-app-front/src/app/edit/%5Bslug%5D/page.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport api from '@/lib/axios';\nimport { useEffect, useState } from 'react';\nimport { useParams, useRouter } from 'next/navigation';\n\nexport default function EditPage() {\n    const router = useRouter();\n    const { slug } = useParams();\n    const [newSlug, setNewSlug] = useState('');\n    const [title, setTitle] = useState('');\n    const [description, setDescription] = useState('');\n    const [body, setBody] = useState('');\n    const [tags, setTags] = useState<string[]>([]);\n    const [tagInput, setTagInput] = useState('');\n    const [favorite, setFavorite] = useState(false);\n    const [favoriteCount, setFavoriteCount] = useState(0);\n    const [successMessage, setSuccessMessage] = useState('');\n    const [errorMessage, setErrorMessage] = useState('');\n\n    const generateSlug = (title: string): string => {\n        return title\n            .toLowerCase()\n            .trim()\n            .replace(/[^a-z0-9\\s-]/g, '') // 特殊文字を除去\n            .replace(/\\s+/g, '-')         // スペースをハイフンに\n            .replace(/-+/g, '-');         // ハイフン連続も1つに\n    };\n\n    useEffect(() => {\n        setNewSlug(generateSlug(title));\n    }, [title]);\n\n    const handleAddTag = (e: React.KeyboardEvent<HTMLInputElement>) => {\n        if (e.key === 'Enter' && tagInput.trim() !== '') {\n            e.preventDefault();\n            if (!tags.includes(tagInput.trim())) {\n                setTags([...tags, tagInput.trim()]);\n            }\n            setTagInput('');\n        }\n    };\n\n    const handleRemoveTag = (tagToRemove: string) => {\n        setTags(tags.filter(tag => tag !== tagToRemove));\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n\n        if (!slug || !title || !description || !body) {\n            setErrorMessage('すべての項目を入力してください');\n            return;\n        }\n\n        try {\n            await api.get('/sanctum/csrf-cookie');\n            const response = await api.put(`/api/articles/${slug}`, {\n                slug: newSlug,\n                title: title,\n                description: description,\n                body: body,\n                tagList: tags,\n                favorited: favorite,\n                favoritesCount: favoriteCount\n            })\n            setSuccessMessage('記事更新成功！');\n            setNewSlug('');\n            setTitle('');\n            setDescription('');\n            setBody('');\n            setTags([]);\n            setTagInput('');\n            setFavorite(false);\n            setFavoriteCount(0);\n            setErrorMessage('');\n            setTimeout(() => {\n                router.push('/');\n            }, 1000);\n        } catch (error: any) {\n            if (error.response?.data?.message) {\n                setErrorMessage(error.response.data.message);\n            } else {\n                setErrorMessage('記事の更新に失敗しました');\n            }\n        }\n    }\n\n    return (\n        <div className=\"editor-page\">\n            <div className=\"container page\">\n                <div className=\"row\">\n                    <div className=\"col-md-10 offset-md-1 col-xs-12\">\n                        <ul className=\"error-messages\">\n                            {successMessage && <li>{successMessage}</li>}\n                            {errorMessage && <li>{errorMessage}</li>}\n                        </ul>\n\n                        <form onSubmit={handleSubmit}>\n                            <fieldset>\n                                <fieldset className=\"form-group\">\n                                    <input\n                                        type=\"text\"\n                                        value={title}\n                                        onChange={(e) => setTitle(e.target.value)}\n                                        className=\"form-control form-control-lg\"\n                                        placeholder=\"Article Title\"\n                                    />\n                                </fieldset>\n                                <fieldset className=\"form-group\">\n                                    <input\n                                        type=\"text\"\n                                        value={description}\n                                        onChange={(e) => setDescription(e.target.value)}\n                                        className=\"form-control\"\n                                        placeholder=\"What's this article about?\"\n                                    />\n                                </fieldset>\n                                <fieldset className=\"form-group\">\n                                    <textarea\n                                        value={body}\n                                        onChange={(e) => setBody(e.target.value)}\n                                        className=\"form-control\"\n                                        rows={8}\n                                        placeholder=\"Write your article (in markdown)\"\n                                    ></textarea>\n                                </fieldset>\n                                <fieldset className=\"form-group\">\n                                    <input\n                                        type=\"text\"\n                                        value={tagInput}\n                                        onChange={(e) => setTagInput(e.target.value)}\n                                        onKeyDown={handleAddTag}           \n                                        className=\"form-control\"\n                                        placeholder=\"Enter a tag and press Enter\"\n                                    />\n                                    <div className=\"tag-list mt-2\">\n                                        {tags.map(tag => (\n                                            <span key={tag} className=\"tag-default tag-pill\">\n                                                <i\n                                                    className=\"ion-close-round\"\n                                                    style={{ cursor: 'pointer', marginRight: '5px' }}\n                                                    onClick={() => handleRemoveTag(tag)}\n                                                ></i>\n                                                {tag}\n                                            </span>\n                                        ))}\n                                    </div>\n                                </fieldset>\n                                <button className=\"btn btn-lg pull-xs-right btn-primary\" type=\"submit\">\n                                    Publish Article\n                                </button>\n                            </fieldset>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}"],"names":[],"mappings":"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","debugId":null}}]
}